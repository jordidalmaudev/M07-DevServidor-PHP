<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Gestio Formularis</title>
</head>
<body>
    <div class="container">
        <h2>Formulari de Registre</h2>
        <form id="registrationForm" action="formulari.php" method="get">
            <div class="form-item">
                <label for="usuari">Usuari:</label>
                <input type="text" id="usuari" name="usuari" pattern="[a-z0-9]+" title="El camp usuari només admet lletres sense accents, de la a a la z en minúscula i números." required>
            </div>
            <div class="form-item">
                <label for="email">Correu electrònic:</label>
                <input type="email" id="email" name="email" pattern="[a-z0-9]+[a-z0-9]*\.[a-z0-9]+@insestatut\.cat" title="El correu electrònic ha de seguir l'estructura nomcognom.alum@insestatut.cat" required>
            </div>
            <div class="form-item">
                <label for="password">Contrasenya:</label>
                <input type="password" id="password" name="password" pattern="[a-zA-Z0-9$%!-.]{8,16}" title="La contrasenya només admet text d'entre 8 i 16 caràcters, ja siguin lletres de la a a la z sense accents, números o els símbols $, %, !, -, ., _." required>
            </div>
            <div class="form-item">
                <label for="confirm_password">Repeteix contrasenya:</label>
                <input type="password" id="confirm_password" name="confirm_password" required>
            </div>
            <div class="form-item">
                <button type="submit">Registrar</button>
            </div>
        </form>
    </div>

    <script>
        document.getElementById('registrationForm').addEventListener('submit', function(event) {
            const form = event.target;
            const email = form.email;
            const password = form.password;
            const confirmPassword = form.confirm_password;

            // Validación del campo de correo electrónico
            if (!email.checkValidity()) {
                email.setCustomValidity('El correu electrònic ha de seguir l\'estructura nomcognom.alum@insestatut.cat');
            } else {
                email.setCustomValidity('');
            }

            // Validación del campo de contraseña
            if (!password.checkValidity()) {
                password.setCustomValidity('La contrasenya només admet text d\'entre 8 i 16 caràcters, ja siguin lletres de la a a la z sense accents, números o els símbols $, %, !, -, ., _.');
            } else {
                password.setCustomValidity('');
            }

            // Validación del campo de confirmación de contraseña
            if (password.value !== confirmPassword.value) {
                confirmPassword.setCustomValidity('Les contrasenyes no coincideixen.');
            } else {
                confirmPassword.setCustomValidity('');
            }

            // Si el formulario no es válido, prevenir el envío
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
        });
    </script>
</body>
</html>